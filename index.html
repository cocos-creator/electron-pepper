<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello</title>

    <script type="text/javascript">

    // Indicate load success.
    function readFileContent() {
      var file_io = document.getElementById('file_io');
      file_io.postMessage("read");
    }

    function deleteFile() {
      var file_io = document.getElementById('file_io');
      file_io.postMessage("delete");
    }

    function saveFileContent() {
      var text = document.getElementById('text');
      var file_io = document.getElementById('file_io');
      file_io.postMessage('save:' + text.value)
    }

    function handleMessage(event) {
      var p = document.getElementById('file_content');
      data = event.data.split('\n').join('<br>');
      p.innerHTML = 'file content is:<br>' + data;
    }


  </script>

  </head>
  <body>

    <embed width="0" height="0"
        id="file_io"
        type="application/x-file_io">

        <script type="text/javascript">
            var file_io = document.getElementById('file_io');
            file_io.addEventListener('message', handleMessage, true);

            var file_io = document.getElementById('file_io');
            file_io.postMessage(__dirname);
        </script>

    </embed>
    <p id="file_content">

    </p>

    <button onclick="readFileContent()">read file content</button>
    <br>
    <button onclick="deleteFile()">delete file</button>
    <br>

    <textarea id="text" rows="4" cols="50">
    Input something to save to file.
    </textarea>
    <br>
    <button onclick="saveFileContent()">save</button>

  </body>
</html>
